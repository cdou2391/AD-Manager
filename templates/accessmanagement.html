{% extends "base2.html" %}
{% block title %}
User Access Management
{% endblock %}
{% block content %} 
<div class="sidebar">
    <div class="linkslist">
        <li>
            <button class="tablinks" onclick="window.location.href='{{url_for('home')}}';">Dashboard</a></button>
        </li>
        <li>
            <button class="tablinks" onclick="window.location.href='{{url_for('bkstaff')}}';">Bank of Kigali Staff</a></button>
        </li>
        <li>
            <button class="tablinks" onclick="window.location.href='{{url_for('bkcstaff')}}';">BK Capital Staff</a></button>
        </li>
        <li>
            <button class="tablinks" onclick="window.location.href='{{url_for('bkistaff')}}';">BK Insurance Staff</a></button>
        </li>
        <li>
            <button class="tablinks" onclick="window.location.href='{{url_for('lockedusers')}}';">Locked Staff</a></button>
        </li>
        <li>
            <button class="tablinks" onclick="window.location.href='{{url_for('disabledstaff')}}';">Disabled Staff</a></button>
        </li>
        <li>
            <button class="tablinks" onclick="window.location.href='{{url_for('serviceaccounts')}}';">Service Accounts</a></button>
        </li>
        <li>
            <button class="tablinks" onclick="window.location.href='{{url_for('consultants')}}';" >Consultants</a></button>
        </li>
        
        {%if role=="View Only"%}
            <div class="accessed-links" style="display:none">
        {%else%} 
            <div class="accessed-links">
        {%endif%}
            <li>
                <button class="tablinks" onclick="window.location.href='{{url_for('securitygroups')}}';">Security Groups</button>
            </li>
            <li>
                <button class="tablinks" onclick="window.location.href='{{url_for('reports')}}';">Reports</button>
            </li> 
            <li>
                <button class="tablinks" onclick="window.location.href='{{url_for('configuration')}}';">Configurations</button>
            </li>
            <li>
                <button class="tablinks selectedTab" id="defaultOpen">Access Management</button>
            </li>
            <li>
                <button class="tablinks" onclick="window.location.href='{{url_for('loginlogs')}}';">Login Logs</button>
            </li>
    </div>
</div>
<div class="syncStats">
    <b1>Last sync time:</b1><br>{{syncTime}}<br>
    {%if syncStatus =="Success"%}
    <b2>Sync Status:</b2> <b3 style="color: #43924e;">{{syncStatus}}</b3>
    {%else%}
        <b2>Sync Status:</b2> <b3 style="color: #924343;">{{syncStatus}}</b3>
    {%endif%}
</div>
{% endblock %}
{% block content10 %}
{%if role=="Full Access"%}
    <fieldset class="content-dashboard">
{%else%} 
    <fieldset class="content-dashboard" style="display:none">
{%endif%}
        <legend style="font-size: 30px;">User Access Management</legend>
        <div id="Access Management" class="w3-container" style="background-color: white; color: black;">
            <table id="table-users" style="color: black;" class="table table-striped table-bordered table-users" width="100%" data-page-length="10" data-order="[[ 1, &quot;asc&quot; ]]">
                <thead>
                    <tr>
                        <th>Fullnames</th>
                        <th>Username</th>
                        <th>Title</th>
                        <th>Date added</th>
                        <th>Last logon</th>
                        <th>Rights</th>
                        <th>Status</th>
                    </tr>
                </thead>
                <tbody>
                    {%for i in range(0,len)%}
                    <form class="form-inline" method="POST" action="{{ url_for('grantaccess') }}">
                        <tr>
                            <td>{{fullnames[i]}}</td>
                            <td id={{i}} class="viewInfo"><a href="{{ url_for('userInformation', var=usernames[i]) }}" type="submit">{{usernames[i]}}</a></td>
                            <td>{{title[i]}}</td>
                            <td>{{date_added[i]}}</td>
                            <td>{{last_logon[i]}}</td>
                            <td>
                                <select name="accessrights" id="accessrights">
                                    <option value="{{rights[i]}}">{{rights[i]}}</option>
                                    <option value="Full Access">Full Access</option>
                                    <option value="View Only">View Only</option>
                                    <option value="Audit">Audit</option>
                                </select>
                            <td>
                                {%if status[i] =="Enabled"%}
                                    <button type="submit" class="button btnReminder" id="btnReminder" style="color: #f80000;" onclick="window.location.href='{{ url_for('revokeaccess', var=usernames[i]) }}';">Disable</button>
                                {%elif status[i]=="Disabled"%}
                                    <button type="submit" class="button btnReminder" id="btnReminder" style="color: #43924e;" onclick="window.location.href='{{ url_for('grantaccess', var=usernames[i]) }}';">Enable</button>
                                {%endif%}
                            </td>
                        </tr>
                    </form>
                    {%endfor%}
                </tbody>
            </table>
    </fieldset>
{% endblock %}

