{% extends "base2.html" %}
{% block title %}
Security Groups
{% endblock %}
{% block content %} 
<div class="sidebar">
    <div class="linkslist">
        <li>
            <button class="tablinks" onclick="window.location.href='{{url_for('home')}}';" >Dashboard</a></button>
        </li>
        <li>
            <button class="tablinks" onclick="window.location.href='{{url_for('bkstaff')}}';">Bank of Kigali Staff</a></button>
        </li>
        <li>
            <button class="tablinks" onclick="window.location.href='{{url_for('bktstaff')}}';">BK Techouse Staff</a></button>
        </li>
        <li>
            <button class="tablinks" onclick="window.location.href='{{url_for('bkcstaff')}}';">BK Capital Staff</a></button>
        </li>
        <li>
            <button class="tablinks" onclick="window.location.href='{{url_for('bkistaff')}}';">BK Insurance Staff</a></button>
        </li>
        <li>
            <button class="tablinks" onclick="window.location.href='{{url_for('lockedusers')}}';">Locked Staff</a></button>
        </li>
        <li>
            <button class="tablinks" onclick="window.location.href='{{url_for('disabledstaff')}}';">Disabled Staff</a></button>
        </li>
        <li>
            <button class="tablinks" onclick="window.location.href='{{url_for('serviceaccounts')}}';">Service Accounts</a></button>
        </li>
        <li>
            <button class="tablinks" onclick="window.location.href='{{url_for('consultants')}}';" >Consultants</a></button>
        </li>
        
        {%if role=="View Only"%}
            <div class="accessed-links" style="display:none">
        {%else%} 
            <div class="accessed-links">
        {%endif%}
            <li>
                <button class="tablinks selectedTab" id="defaultOpen">Security Groups</button>
            </li>
            <li>
                <button class="tablinks" onclick="window.location.href='{{url_for('reports')}}';">Reports</button>
            </li> 
            <li>
                <button class="tablinks" onclick="window.location.href='{{url_for('configuration')}}';">Configurations</button>
            </li>
            <li>
                <button class="tablinks" onclick="window.location.href='{{url_for('accessmanagement')}}';">Access Management</button>
            </li>
            <li>
                <button class="tablinks" onclick="window.location.href='{{url_for('loginlogs')}}';">Login Logs</button>
            </li>
    </div>
</div>
<div class="syncStats">
    <b1>Last sync time:</b1><br>{{syncTime}}<br>
    {%if syncStatus =="Success"%}
    <b2>Sync Status:</b2> <b3 style="color: #43924e;">{{syncStatus}}</b3>
    {%else%}
        <b2>Sync Status:</b2> <b3 style="color: #924343;">{{syncStatus}}</b3>
    {%endif%}
</div>
{% endblock %}
<center><div>
    {% with messages = get_flashed_messages() %}
    {% if messages %}
        {% for message in messages %}
        <li>{{ message }}</li>
        {% endfor %}
        </ul>
    {% endif %}
    {% endwith %}
</div></center>
{% block content3 %}
<div class="flex-container">
    <fieldset class="content-left sgroups" style="color:white;">
        <legend style="font-size: 30px;">Security Groups</legend>
        <button class="button btnAdd" id="btnAdd"><a href="{{ url_for('newsecuritygroup') }}" type="submit" style="font-family:Helvetica;">Create new Security Group</a></button>
        <div id="Security Groups" class="w3-container w3-border company" style="background-color: white; color: black;">
            <table id="table7" style="color:black; "  class="table table-striped table-bordered" width="100%" data-page-length="10" data-order="[[ 1, &quot;asc&quot; ]]">
                <thead>
                    <tr>
                        <th>Group name</th>
                        <th>Created on</th>
                        <th>Action</th>
                    </tr>
                </thead>
                <tbody>
                    {%for i in range(0,len2)%}
                        <tr>
                            <td id={{groupName[i]}} name={{groupName[i]}} class="viewInfo"><a href="{{ url_for('securitygroupmembers',var=groupName[i]) }}" type="submit">{{groupName[i]}}</a></td>
                            <td>{{groupCreationDate[i]}}</td><td>
                                <button class="button btnremovemember" id="removemember"><a href="{{ url_for('removeuserfromgroup', var=groupName[i]) }}" type="submit" style="font-family:Helvetica;"><b>Delete SG</b></a></button>
                            </td>
                        </tr>
                    {%endfor%}
                </tbody>
            </table>
        </div>
    </fieldset>
    <fieldset class="content-center-group sgroups" style="color:black;">
        <legend style="font-size: 30px;">Group Members: {{grpName}}</legend>
        <button class="button btnAdd" id="btnAdd"><a href="{{ url_for('addnewmember') }}" type="submit" style="font-family:Helvetica;">Add new member</a></button>
        <div id="SSG Members" class="w3-container w3-border company" style="background-color: white; color: black;">
            <table id="table9" style="color:black"  class="table table-striped table-bordered" width="100%" data-page-length="10" data-order="[[ 1, &quot;asc&quot; ]]">
                <thead>
                    <tr>
                        <th>Fullname</th>
                        <th>Username</th>
                        <th>Action</th>
                    </tr>
                </thead>
                <tbody>
                    {%for i in range(0,len5)%}
                        <tr>
                            <td>{{groupMembersDisplayname[i]}}</td>
                            <td id={{i}} class="viewInfo"><a href="{{ url_for('userInformation', var=groupMembersUsername[i]) }}" type="submit">{{groupMembersUsername[i]}}</a></td>
                            <td>
                                <button class="button btnremovemember" id="removemember"><a href="{{ url_for('removeuserfromgroup', var=groupMembersUsername[i],var2=grpName) }}" type="submit" style="font-family:Helvetica;"><b>Remove from group</b></a></button>
                            </td>
                        </tr>
                    {%endfor%}
                </tbody>
            </table>
        </div>
    </fieldset>
</div>
{% endblock %}